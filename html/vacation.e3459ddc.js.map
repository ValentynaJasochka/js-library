{"mappings":"AAAA,MAAMA,EAAY,CAChBC,KAAMC,SAASC,cAAc,cAC7BC,cAAeF,SAASC,cAAc,sBACtCE,SAAUH,SAASC,cAAc,WACjCG,KAAMJ,SAASC,cAAc,wBAEzBF,KAAEM,EAAIH,cAAEI,EAAaH,SAAEI,EAAQH,KAAEI,GAASV,EAEhDS,EAASE,iBAAiB,SAE1B,WACEH,EAAcI,mBACZ,YACA,wC,IAJJL,EAAKI,iBAAiB,UAOtBE,eAA6BC,GAC3BA,EAAIC,iBACJ,MACMC,EADW,IAAIC,SAASH,EAAII,eAE/BC,OAAO,WACPC,KAAIC,GAAQA,EAAKC,SACjBC,QAAOF,GAAQA,IAElBd,EAAKiB,QACL,IACA,MAAMC,QASRZ,eAA8Ba,GAC5B,MAAMC,EAAW,uCACXC,QAAkBF,EAAIN,KAAIP,MAAMgB,UACjBC,MAAM,GAAGH,IAAWE,MAE3BE,SAGd,aADmBC,QAAQC,WAAWL,IAEnCL,QAAO,EAACW,OAAEA,KAAwB,cAAXA,IACvBd,KAAI,EAACe,MAAEA,KAAYA,EAAM,GAAGC,QAAQ,I,CAnBhBC,CAAerB,GAChCsB,QAsBRzB,eAA8BY,GAC5B,MAAMc,EAAU,kCACVC,EAAW,+BACXC,EAAW,gBACXb,QAAkBH,EAASL,KAAIP,MAAMuB,UAClBN,MACrB,GAAGU,IAAWC,SAAgBF,OAAaH,cAE7BL,SAGZW,QAAaV,QAAQC,WAAWL,GACtCe,QAAQC,IAAIF,GAgBZ,OAfgBA,EACbnB,QAAO,EAACW,OAAEA,KAAwB,cAAXA,IACvBd,KACC,EACEe,OACEU,SAASC,OACPA,EACAC,WAAWC,KAAEA,EAAIC,KAAEA,IAErBC,UAAUrB,QAAEA,EAAOsB,KAAEA,QAGhB,C,QAAEtB,E,KAASsB,E,KAAMH,E,OAAMF,E,KAAQG,K,CA/CtBG,CAAe3B,GACrCf,EAAK2C,UAAyBf,EAoDnBlB,KACT,EAACS,QAAEA,EAAOsB,KAAEA,EAAIH,KAAEA,EAAIF,OAAEA,EAAMG,KAAEA,KAAW,kCAEzBA,WAAcD,uBACpBG,yBACAtB,wBACDiB,uBACAE,2C,CA1DX,MAAMM,GAAMX,QAAQC,IAAIU,E","sources":["src/js/scripts/vacation.js"],"sourcesContent":["const selectors = {\n  form: document.querySelector('.js-search'),\n  formContainer: document.querySelector('.js-form-container'),\n  addField: document.querySelector('.js-add'),\n  list: document.querySelector('.js-list-container'),\n};\nconst { form, formContainer, addField, list } = selectors;\n\naddField.addEventListener('click', handlerAdd);\nform.addEventListener('submit', handlerSearch);\nfunction handlerAdd() {\n  formContainer.insertAdjacentHTML(\n    'beforeend',\n    ' <input type=\"text\" name=\"country\" />'\n  );\n}\nasync function handlerSearch(evt) {\n  evt.preventDefault();\n  const formData = new FormData(evt.currentTarget);\n  const countries = formData\n    .getAll('country')\n    .map(item => item.trim())\n    .filter(item => item);\n \n  form.reset();\n  try{\n  const capitals = await serviceCountry(countries);\n  const weather = await serviceWeather(capitals);\n  list.innerHTML = createMarkup(weather);\n  } catch(err) {console.log(err);}\n\n  \n \n}\n\nasync function serviceCountry(arr) {\n  const Base_URL = 'https://restcountries.com/v3.1/name/';\n  const responses = await arr.map(async country => {\n    const resp = await fetch(`${Base_URL}${country}`);\n    //  console.log(await resp.json());\n    return resp.json();\n  });\n  const data = await Promise.allSettled(responses);\n  return data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value[0].capital[0]);\n  //  console.log(data);\n}\n\nasync function serviceWeather(capitals) {\n  const API_Key = 'd6ef5733ea0c4b55952125610252606';\n  const BASE_URL = 'http://api.weatherapi.com/v1';\n  const EndPOINT = '/current.json';\n  const responses = await capitals.map(async capital => {\n    const response = await fetch(\n      `${BASE_URL}${EndPOINT}?key=${API_Key}&q=${capital}&lang=uk`\n    );\n    return response.json();\n  });\n  // console.log(responses);\n  const data = await Promise.allSettled(responses);\n  console.log(data);\n  const weather = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(\n      ({\n        value: {\n          current: {\n            temp_c,\n            condition: { text, icon },\n          },\n          location: { country, name },\n        },\n      }) => {\n        return { country, name, text, temp_c, icon };\n      }\n    );\n  return weather;\n}\nfunction createMarkup(arr) {\n  return arr.map(\n    ({ country, name, text, temp_c, icon }) => `\n   <li>\n          <img src=\"${icon}\" alt=\"${text}\"/>\n          <h2>${name}</h2>\n          <h2>${country}</h2>\n          <p>${temp_c}</p>\n          <p>${text}</p>\n          <p></p>\n        </li>`\n  );\n}\n\n// const service = {\n//   countries: ['Ukraine', 'France', 'Poland'],\n//   async serviceCountry() {\n//     const responses = this.countries.map(async country => {\n//       const resp = await fetch(\n//         `https://restcountries.com/v3.1/name/${country}`\n//       );\n//        console.log(await resp.json());\n//       return resp.json();\n//     });\n\n//   },\n// };\n"],"names":["$6dce8e473cd58e42$var$selectors","form","document","querySelector","formContainer","addField","list","$6dce8e473cd58e42$var$form","$6dce8e473cd58e42$var$formContainer","$6dce8e473cd58e42$var$addField","$6dce8e473cd58e42$var$list","addEventListener","insertAdjacentHTML","async","evt","preventDefault","countries","FormData","currentTarget","getAll","map","item","trim","filter","reset","capitals","arr","Base_URL","responses","country","fetch","json","Promise","allSettled","status","value","capital","$6dce8e473cd58e42$var$serviceCountry","weather","API_Key","BASE_URL","EndPOINT","data","console","log","current","temp_c","condition","text","icon","location","name","$6dce8e473cd58e42$var$serviceWeather","innerHTML","err"],"version":3,"file":"vacation.e3459ddc.js.map"}