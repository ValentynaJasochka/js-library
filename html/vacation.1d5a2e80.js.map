{"mappings":"AAAA,MAAMA,EAAY,CAChBC,KAAMC,SAASC,cAAc,cAC7BC,cAAeF,SAASC,cAAc,sBACtCE,SAAUH,SAASC,cAAc,aAE7BF,KAAEK,EAAIF,cAAEG,EAAaF,SAAEG,GAAaR,EAE1CQ,EAASC,iBAAiB,SAE1B,WACEF,EAAcG,mBACZ,YACA,wC,IAJJJ,EAAKG,iBAAiB,UAOtBE,eAA6BC,GAC3BA,EAAIC,iBACJ,MACMC,EADW,IAAIC,SAASH,EAAII,eAE/BC,OAAO,WACPC,KAAIC,GAAQA,EAAKC,SACjBC,QAAOF,GAAQA,IAClBG,QAAQC,IAAIT,GACZR,EAAKkB,QACL,MAAMC,QAKRd,eAA8Be,GAC5B,MAAMC,EAAW,uCACXC,QAAkBF,EAAIR,KAAIP,MAAMkB,UACjBC,MAAM,GAAGH,IAAWE,MAE3BE,SAGd,aADmBC,QAAQC,WAAWL,IAEnCP,QAAO,EAACa,OAAEA,KAAwB,cAAXA,IACvBhB,KAAI,EAACiB,MAAEA,KAAYA,EAAM,GAAGC,QAAQ,I,CAfhBC,CAAevB,GACjCwB,QAkBP3B,eAA8Bc,GAC5B,MAAMc,EAAU,kCACVC,EAAW,+BACXC,EAAW,gBACXb,QAAkBH,EAASP,KAAIP,MAAMyB,UAClBN,MACrB,GAAGU,IAAWC,SAAgBF,OAAaH,cAE7BL,SAGZW,QAAaV,QAAQC,WAAWL,GACpCN,QAAQC,IAAImB,GAeZ,OAdaA,EACZrB,QAAO,EAACa,OAAEA,KAAwB,cAAXA,IACvBhB,KACC,EACEiB,OACEQ,SAASC,OACPA,EACAC,WAAWC,KAAEA,EAAIC,KAAEA,IAErBC,UAAUnB,QAAEA,EAAOoB,KAAEA,QAEX,C,QAAEpB,E,KAASoB,E,KAAMH,E,OAAMF,E,KAAQG,K,CA1C5BG,CAAezB,GACpCH,QAAQC,IAAKe,E","sources":["src/js/scripts/vacation.js"],"sourcesContent":["const selectors = {\n  form: document.querySelector('.js-search'),\n  formContainer: document.querySelector('.js-form-container'),\n  addField: document.querySelector('.js-add'),\n};\nconst { form, formContainer, addField } = selectors;\n\naddField.addEventListener('click', handlerAdd);\nform.addEventListener('submit', handlerSearch);\nfunction handlerAdd() {\n  formContainer.insertAdjacentHTML(\n    'beforeend',\n    ' <input type=\"text\" name=\"country\" />'\n  );\n}\nasync function handlerSearch(evt) {\n  evt.preventDefault();\n  const formData = new FormData(evt.currentTarget);\n  const countries = formData\n    .getAll('country')\n    .map(item => item.trim())\n    .filter(item => item);\n  console.log(countries);\n  form.reset();\n  const capitals = await serviceCountry(countries);\n const weather = await serviceWeather(capitals)\n  console.log( weather);\n}\n\nasync function serviceCountry(arr) {\n  const Base_URL = 'https://restcountries.com/v3.1/name/';\n  const responses = await arr.map(async country => {\n    const resp = await fetch(`${Base_URL}${country}`);\n    //  console.log(await resp.json());\n    return resp.json();\n  });\n  const data = await Promise.allSettled(responses);\n  return data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value[0].capital[0]);\n  //  console.log(data);\n}\n\nasync function serviceWeather(capitals) {\n  const API_Key = 'd6ef5733ea0c4b55952125610252606';\n  const BASE_URL = 'http://api.weatherapi.com/v1';\n  const EndPOINT = '/current.json';\n  const responses = await capitals.map(async capital => {\n    const response = await fetch(\n      `${BASE_URL}${EndPOINT}?key=${API_Key}&q=${capital}&lang=uk`\n    );\n    return response.json();\n  });\n  // console.log(responses);\n  const data = await Promise.allSettled(responses);\n    console.log(data);\nconst weather =  data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(\n      ({\n        value: {\n          current: {\n            temp_c,\n            condition: { text, icon },\n          },\n          location: { country, name },\n        },\n      }) => {return { country, name, text, temp_c, icon }\n      }\n    );\n    return weather;\n}\n\n// const service = {\n//   countries: ['Ukraine', 'France', 'Poland'],\n//   async serviceCountry() {\n//     const responses = this.countries.map(async country => {\n//       const resp = await fetch(\n//         `https://restcountries.com/v3.1/name/${country}`\n//       );\n//        console.log(await resp.json());\n//       return resp.json();\n//     });\n\n//   },\n// };\n"],"names":["$6dce8e473cd58e42$var$selectors","form","document","querySelector","formContainer","addField","$6dce8e473cd58e42$var$form","$6dce8e473cd58e42$var$formContainer","$6dce8e473cd58e42$var$addField","addEventListener","insertAdjacentHTML","async","evt","preventDefault","countries","FormData","currentTarget","getAll","map","item","trim","filter","console","log","reset","capitals","arr","Base_URL","responses","country","fetch","json","Promise","allSettled","status","value","capital","$6dce8e473cd58e42$var$serviceCountry","weather","API_Key","BASE_URL","EndPOINT","data","current","temp_c","condition","text","icon","location","name","$6dce8e473cd58e42$var$serviceWeather"],"version":3,"file":"vacation.1d5a2e80.js.map"}